<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShadowTrace -Basic Web Scanning</title>
    <link rel="icon" href="./Logo/ShadowTrace.svg" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">
    <link href="./css/call.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .container {
            padding: 20px;
            font-family: 'Poppins', sans-serif;
            background-color: #f9f9f9;
        }

        .info-section {
            background: white;
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

        .info-section h3 {
            margin-bottom: 10px;
        }

        .uid-label {
            font-weight: bold;
        }

        .uid-input {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        .uid-input input {
            width: 30px;
            height: 30px;
            text-align: center;
            margin: 2px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .uid-separator {
            width: 10px; /* Width of the separator */
            height: 1px; /* Height of the separator line */
            background-color: #000; /* Color of the separator line */
            margin: 0 5px; /* Margin between inputs */
            align-self: center; /* Center the separator line */
        }

        .mobile,
        .email {
            margin-top: 5px;
        }

        .email a {
            text-decoration: underline;
            color: #007BFF; /* Email link color */
        }

        .charts {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
        }

        .chart {
            width: 100%;
            height: 200px;
            border-radius: 5px;
        }

        .chart-title {
            text-align: center;
            margin: 10px 0;
        }

       
        .search-container {
            margin-top: 50px;
            background-color: rgba(255, 255, 255, 0.5);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }

        .search-input {
            width: 300px;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: none;
            outline: none;
            font-size: 16px;
            color: black;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .search-btn, .submit-btn {
            background-color: #0a3b57;
            color: rgb(255, 250, 250);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }

        .search-btn i {
            font-size: 18px;
        }

        .search-btn:hover, .submit-btn:hover {
            background-color: #32648d;
        }

        .submit-container {
            margin-top: 20px;
        }

        .terminal {
            background-color: rgba(11, 7, 7, 0.9);
            color: green;
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 1200px;
            height: 200px;
            overflow-y: auto;
            margin-top: 20px;
            font-family: monospace;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        .search-container {
   
    background-color: rgba(255, 255, 255, 0.5);
   
    border-radius: 15px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
}

/* Adjust button width to match the input */


        .terminal .line {
            display: block;
        }

        .dashboard-container {
            display: flex;
        }

        .sidebar {
            width: 350px;
            background-color: #0b1b30;
            position: fixed;
            height: 100vh;
        }

        .profile {
            margin-top: 70px;
            padding: 20px;
        }

        .profile img {
            width: 120px;
            border-radius: 50%;
        }

        .nav-section {
            margin-top: 15px;
        }

        .nav-heading {
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            color: white;
        }

        .nav-heading i {
            width: 30px;
        }

        .nav-treeview {
            display: none;
            padding-left: 20px;
        }

        .nav-treeview ul {
            list-style-type: none;
        }
        .nav-treeview ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.nav-treeview li {
    position: relative;
    
}

.nav-treeview a {
    text-decoration: none;
    color: #000;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.nav-section a:hover {
        color: #021e3a; /* Change this color to your preferred hover color */
        background-color: rgba(177, 233, 243, 0.936); /* Optional: Add background color on hover */
        transition: color 0.3s ease, background-color 0.3s ease;
    }
.toggle-btn {
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-left: 10px;
}

.sub-menu {
    display: none;
    padding-left: 20px;
}
.scan-container {
    display: flex; /* Use flexbox to arrange items in a row */
    justify-content: space-between; /* Space items evenly */
    margin: 10px 0; /* Add some margin for spacing */
}

.scan-item {
    width: 130px; /* Set a fixed width for scan items */
    border-radius: 5px; /* Rounded corners */
    text-align: center; /* Center text */
}

.scan-item a {
    color: white; /* Text color */
    text-decoration: none; /* Remove underline */
    display: block; /* Block display for full clickable area */
    padding: 10px; /* Padding for clickable area */
}



.nav-treeview li.active .sub-menu {
    display: block;
}


        .nav-treeview ul li a {
            display: flex;
            align-items: center;
            color: white;
            text-decoration: none;
            margin: 5px 0;
        }

        .nav-treeview ul li a i {
            margin-right: 10px;
        }
      
        .main-content {
            margin-left: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-top: -60px;
            width: calc(100% - 350px);
        }

        .scan-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        /* General UID Box Styling */
/* General UID and Mobile Box Styling */
.uid-box {
    width: 20px;
    height: 20px;
    text-align: center;
    margin: 2px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
}
.mobile-box {
    width: 20px;
    height: 20px;
    text-align: center;
    margin: 2px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9; 
}

/* Mobile Section Styling */
.flag-icon {
    width: 20px;
    height: 30px;
    vertical-align: left;
}

.mobile-number {
    display: flex;
   
}

/* Email Section Styling */
.email-container {
    display: flex;
    justify-content: center;
    align-items: center;
}

.email-box {
    width: 110px;
    height: 30px;
    padding: 0 5px;
    text-align: center;
    margin: 2px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
}

.email-container span {
    margin: 0 5px;
    font-weight: bold;
}
#timer-container {
    position: absolute;
    top: 70px;
    right: 50px;
   
    padding: 10px;
    border-radius: 5px;
  
    font-size: 16px;
    font-weight: bold;
    display: inline-block;
}
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div style="position: fixed; top: 10px; left: 10px; z-index: 1000;">
                <a href="index.html">
                    <img src="./Logo/Shadowtrace-Kristellar.png" alt="Company Logo" style="height: 60px;">
                </a>
            </div>
            <div class="profile">
                <div class="profile-picture" style="text-align: center;">
                    <img src="./photos/Saty.png" alt="Profile Picture" style="border-radius: 50%; border: 2px solid #fff;">
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <p style="font-weight: bold;">UID</p>
                    <div style="display: flex; justify-content: center; margin-bottom: 10px;">
                        <input type="text" value="1" readonly class="uid-box">
                        <input type="text" value="2" readonly class="uid-box">
                        <input type="text" value="3" readonly class="uid-box">
                        <input type="text" value="4" readonly class="uid-box">
                        <input type="text" value="5" readonly class="uid-box">
                        <input type="text" value="6" readonly class="uid-box">
                    </div>
                </div>
            
                <!-- Mobile Section -->
                <div class="mobile" style="text-align: center; margin-top: 20px;">
                    <div style="display: flex; justify-content: center; align-items: center;">
                        <img src="./photos/png-transparent-india-flags-icon.png" alt="Indian Flag" class="flag-icon">
                        <div class="mobile-number" style="display: flex; margin-left: 5px;">
                            <input type="text" value="9" readonly class="mobile-box">
                            <input type="text" value="8" readonly class="mobile-box">
                            <input type="text" value="7" readonly class="mobile-box">
                            <input type="text" value="6" readonly class="mobile-box">
                            <input type="text" value="5" readonly class="mobile-box">
                            <input type="text" value="4" readonly class="mobile-box">
                            <input type="text" value="3" readonly class="mobile-box">
                            <input type="text" value="2" readonly class="mobile-box">
                            <input type="text" value="1" readonly class="mobile-box">
                            <input type="text" value="0" readonly class="mobile-box">
                        </div>
                    </div>
                </div>
            
                <!-- Email Section -->
                <div class="email" style="text-align: center; margin-top: 20px;">
                    <div class="email-container">
                        <input type="text" value="example" readonly class="email-box">
                        <span>@</span>
                        <input type="text" value="example.com" readonly class="email-box">
                    </div>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-heading" onclick="toggleNavTreeview('scanning-treeview')">
                    <i class="fa fa-bullseye"></i>
                    <span>Scanning</span>
                    <i class="fa fa-angle-right right"></i>
                </div>
                <div class="nav-treeview" id="scanning-treeview">
                    <ul>
                        <!-- IP Scanning -->
                        <li class="dropdown-item">
                            <a href="#" onclick="toggleSubMenu('ip-scan-submenu')">
                                <i class="fa fa-network-wired"></i> IP Scanning
                                <i class="fa fa-angle-down toggle-btn"></i>
                            </a>
                            <ul class="sub-menu" id="ip-scan-submenu">
                                <li><a href="Basic-IP-Scan.html">Basic Scan</a></li>
                                <li><a href="Advance-IP-Scan.html">Advanced Scan</a></li>
                            </ul>
                        </li>
                        
                        <!-- Web Scanning -->
                        <li class="dropdown-item">
                            <a href="#" onclick="toggleSubMenu('web-scan-submenu')">
                                <i class="fa fa-search"></i> Web Scanning
                                <i class="fa fa-angle-down toggle-btn"></i>
                            </a>
                            <ul class="sub-menu" id="web-scan-submenu">
                                <li><a href="Web-scan-basic.html">Basic Scan</a></li>
                                <li><a href="Advance-Web-scan.html">Advanced Scan</a></li>
                            </ul>
                        </li>
                        
                        <!-- App Scanning -->
                        <li class="dropdown-item">
                            <a href="#" onclick="toggleSubMenu('app-scan-submenu')">
                                <i class="fa fa-mobile-alt"></i> App Scanning
                                <i class="fa fa-angle-down toggle-btn"></i>
                            </a>
                            <ul class="sub-menu" id="app-scan-submenu">
                                <li><a href="app-scan-basic.html">Basic Scan</a></li>
                                <li><a href="advance-app-scan.html">Advanced Scan</a></li>
                            </ul>
                        </li>
                        
                        <!-- Cloud Scanning -->
                        <li class="dropdown-item">
                            <a href="#" onclick="toggleSubMenu('cloud-scan-submenu')">
                                <i class="fa fa-cloud"></i> Cloud Scanning
                                <i class="fa fa-angle-down toggle-btn"></i>
                            </a>
                            <ul class="sub-menu" id="cloud-scan-submenu">
                                <li><a href="basic-cloud-scan.html">Basic Scan</a></li>
                                <li><a href="Advance-cloud-scanning.html">Advanced Scan</a></li>
                            </ul>
                        </li>
                        
                        <!-- Network Scanning -->
                        <li class="dropdown-item">
                            <a href="#" onclick="toggleSubMenu('network-scan-submenu')">
                                <i class="fa fa-globe"></i> Network Scanning
                                <i class="fa fa-angle-down toggle-btn"></i>
                            </a>
                            <ul class="sub-menu" id="network-scan-submenu">
                                <li><a href="basic-network-scan.html">Basic Scan</a></li>
                                <li><a href="Advance-network-scanning.html">Advanced Scan</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="search-container">
                <h2 style="color: rgb(2, 2, 2);">Basic Web Scanning</h2>
                <div id="timer-container">
                    <span>Time Spent: </span>
                    <span id="time-spent" style="font-size: 20px; font-weight: bold; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border: 1px solid #ccc; display: inline-block; text-align: center;">00:00:00</span>
                </div>
                <!-- Flex container for Cloud Service Search and Stats -->
                <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px;">
                    <!-- Cloud Service Search Input -->
                    <input type="text" id="web-scan-input" placeholder="Enter Website Name or URL" class="search-input" style="flex: 1; margin-right: 20px; margin-top: 15px;">
                    <button onclick="scanWebsite()" class="search-btn"style="margin-left: -10px;"><i class="fa fa-search" ></i></button>
                    
                    <!-- Total Scans Display -->
                    <div style="margin-left: 20px;">
                        <span>Total Scans: </span>
                        <span id="total-scans" style="font-size: 20px; font-weight: bold; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border: 1px solid #ccc; display: inline-block; width: 80px; text-align: center;">000</span>
                    </div>
                    
                    <!-- Scan ID Dropdown -->
                    <div style="margin-left: 20px;">
                        <label for="scan-id-select">Scan ID:</label>
                        <select id="scan-id-select" style="padding: 10px; border-radius: 5px; border: 1px solid #ccc; background-color: white;">
                            <option value="" disabled selected>Select Scan ID</option>
                        </select>
                    </div>
                </div>
            
                <!-- Terminal Section -->
                <section class="charts">
                    <div class="chart">
                        <h3 class="chart-title">Severity Trend</h3>
                        <canvas id="severityTrend"></canvas>
                    </div>
                    <div class="chart">
                        <h3 class="chart-title">Issues</h3>
                        <canvas id="issuesHistogram"></canvas>
                    </div>
                    <div class="chart">
                        <h3 class="chart-title">Severities</h3>
                        <canvas id="severityDonut" style="margin-left: 60px;"></canvas>
                    </div>
                 
                </section>
            
                <div class="terminal" id="terminal" style="margin-top: 40px;">
                    <h3 style="color: white;">Terminal Output</h3>
                </div>
            
                <!-- Download Report Button -->
                <div class="submit-container">
                    <button onclick="downloadReport()" class="submit-btn">Download Report as PDF</button>
                </div>
            </div>
            
        </div>
        
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
let totalScans = 0;
const scanIds = [];

function scanWebsite() {
    const websiteName = document.getElementById('web-scan-input').value;
    const terminal = document.getElementById('terminal');

    // Increment total scans
    totalScans++;
    const scanId = `SCAN-${totalScans}`;
    scanIds.push(scanId); // Store scan ID

    // Update total scans displayed
    document.getElementById('total-scans').innerText = String(totalScans).padStart(3, '0');
    
    // Update scan ID dropdown
    const scanIdSelect = document.getElementById('scan-id-select');
    const option = document.createElement('option');
    option.value = scanId;
    option.text = scanId;
    scanIdSelect.appendChild(option);

    // Terminal output
    terminal.innerHTML += `<div class="line">Scanning website: ${websiteName} (ID: ${scanId})...</div>`;
    setTimeout(() => {
        terminal.innerHTML += `<div class="line">Web scan completed for ID: ${scanId}.</div>`;
    }, 2000);
}

const { jsPDF } = window.jspdf;

window.onload = function() {
    let hours = 0;
    let minutes = 0;
    let seconds = 0;
    
    const timeSpentElement = document.getElementById('time-spent');

    function updateTimer() {
        seconds++;

        if (seconds >= 60) {
            seconds = 0;
            minutes++;
        }

        if (minutes >= 60) {
            minutes = 0;
            hours++;
        }

        let formattedTime = 
            (hours < 10 ? "0" + hours : hours) + ":" + 
            (minutes < 10 ? "0" + minutes : minutes) + ":" + 
            (seconds < 10 ? "0" + seconds : seconds);

        timeSpentElement.textContent = formattedTime;
    }

    setInterval(updateTimer, 1000);
};

function toggleNavTreeview(treeviewId) {
    const treeview = document.getElementById(treeviewId);
    const toggleIcon = treeview.previousElementSibling.querySelector('.right');
    if (treeview.style.display === "none" || !treeview.style.display) {
        treeview.style.display = "block";
        toggleIcon.classList.remove('fa-angle-right');
        toggleIcon.classList.add('fa-angle-down');
    } else {
        treeview.style.display = "none";
        toggleIcon.classList.remove('fa-angle-down');
        toggleIcon.classList.add('fa-angle-right');
    }
}

document.querySelectorAll('.toggle-btn').forEach(function (toggle) {
    toggle.addEventListener('click', function () {
        const parentLi = this.parentElement.parentElement;
        parentLi.classList.toggle('active');

        // Change the plus to minus when submenu is open
        if (parentLi.classList.contains('active')) {
            this.textContent = '-';
        } else {
            this.textContent = '+';
        }
    });
});

function downloadReport() {
    const doc = new jsPDF();
    doc.text("Cloud Scanning Report", 10, 10);
    doc.text("Cloud Service: " + document.getElementById('cloud-name-input').value, 10, 20);
    doc.text("Scan Output:", 10, 30);

    const terminalOutput = document.getElementById('terminal').innerText;
    const outputLines = terminalOutput.split('\n').slice(1); // Skip the title line

    outputLines.forEach((line, index) => {
        doc.text(line, 10, 40 + (index * 10));
    });

    doc.save('cloud_scanning_report.pdf');
}

// Chart initialization
const ctx1 = document.getElementById('severityTrend').getContext('2d');
const ctx2 = document.getElementById('severityDonut').getContext('2d');
const ctx3 = document.getElementById('issuesHistogram').getContext('2d');

// Updated Severity Trend Chart with Dates and More Data
const severityTrendChart = new Chart(ctx1, {
    type: 'line',
    data: {
        labels: ['2023-10-01', '2023-10-02', '2023-10-03', '2023-10-04', '2023-10-05', '2023-10-06', '2023-10-07'],
        datasets: [{
            label: 'Severity Levels',
            data: [12, 15, 9, 17, 14, 20, 22],
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
        }]
    }
});

const severityDonutChart = new Chart(ctx2, {
    type: 'doughnut',
    data: {
        labels: ['Critical', 'High', 'Medium', 'Low'],
        datasets: [{
            label: 'Severities',
            data: [300, 50, 100, 50],
            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
        }]
    }
});

const issuesHistogramChart = new Chart(ctx3, {
    type: 'bar',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr'],
        datasets: [{
            label: 'Issues Detected',
            data: [12, 19, 3, 5],
            backgroundColor: 'rgba(153, 102, 255, 0.2)',
            borderColor: 'rgba(153, 102, 255, 1)',
            borderWidth: 1
        }]
    }
});
    </script>
</body>
</html>
